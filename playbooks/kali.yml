---
- name: Kali Bootstrap Playbook
  hosts: '{{target|default("kali")}}'  # Assumes invetory provides a 'kali' group but can also use ``-e 'target=host1,host2'``
  roles:
    # Run Kali role for initial setup
    - kali
    # Run bulk package installation roles
    - apt
    - pip2
    - pip3
    - pipx
    - ruby
    - git
    # Run app-specific configuration roles
    - burpsuite
    - pspy
    - ysoserial
    - zsh
    - firefox
    - metasploit
    - gdb
    - tmux
    - vim
    - wget
    - vscode
    - xfce

  tasks:
    - name: Post-Installation Cleanup
      ansible.builtin.file:
        path: "{{ item }}"
        state: absent
      loop:
        - "{{ kali_user_details.home }}/.zsh_history"
        - "{{ kali_user_details.home }}/.zshrc"
        - "{{ kali_user_details.home }}/.zshrc.pre-oh-my-zsh"
        - "{{ kali_user_details.home }}/.bashrc"
        - "{{ kali_user_details.home }}/.bashrc.original"
